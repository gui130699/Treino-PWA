<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Treino PWA (Teste 1)</title>

  <link rel="manifest" href="./manifest.json" />
  <meta name="theme-color" content="#111827" />

  <style>
    :root{
      --bg:#0f172a; --card:#1e293b; --card-hover:#334155; --muted:#94a3b8; --line:#475569;
      --pri:#3b82f6; --pri-hover:#2563eb; --sec:#64748b; --ok:#10b981; --warn:#f59e0b; --bad:#ef4444;
      --text:#f1f5f9; --text-dim:#cbd5e1;
      --shadow: 0 4px 6px -1px rgba(0,0,0,.3), 0 2px 4px -1px rgba(0,0,0,.18);
      --shadow-lg: 0 10px 15px -3px rgba(0,0,0,.4), 0 4px 6px -2px rgba(0,0,0,.25);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    
    body{
      font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;
      background:var(--bg);
      color:var(--text);
      line-height:1.6;
      min-height:100vh;
    }
    
    /* Header */
    header{
      position:sticky;
      top:0;
      background:var(--card);
      padding:16px 20px;
      border-bottom:1px solid var(--line);
      z-index:100;
      box-shadow:var(--shadow);
      backdrop-filter:blur(10px);
    }
    header .top{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap}
    header h1{font-size:20px;font-weight:800;color:var(--text)}
    header .sub{color:var(--muted);font-size:13px;margin-top:4px}

    /* Layout */
    main{max-width:1200px;margin:0 auto;padding:20px 16px}
    .grid{display:grid;grid-template-columns:1fr;gap:16px}
    @media(min-width:768px){.grid{grid-template-columns:360px 1fr;gap:20px}}
    
    /* Cards */
    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:16px;
      padding:20px;
      box-shadow:var(--shadow);
      transition:all 0.2s ease;
    }
    .card:hover{box-shadow:var(--shadow-lg);border-color:var(--pri)}
    
    /* Typography */
    h2,h3{margin:0 0 12px 0;color:var(--text)}
    h2{font-size:18px;font-weight:700}
    h3{font-size:15px;font-weight:600;color:var(--text-dim)}
    
    /* Flex utilities */
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .col{display:flex;flex-direction:column;gap:12px}

    /* Form elements */
    label{
      display:block;
      font-size:13px;
      font-weight:600;
      color:var(--text-dim);
      margin-bottom:6px;
    }
    
    input, select, textarea{
      width:100%;
      padding:12px 14px;
      border-radius:10px;
      border:1px solid var(--line);
      background:var(--bg);
      color:var(--text);
      font-size:14px;
      outline:none;
      transition:all 0.2s ease;
    }
    input:focus, select:focus, textarea:focus{
      border-color:var(--pri);
      box-shadow:0 0 0 3px rgba(59,130,246,0.1);
    }
    textarea{min-height:100px;resize:vertical;font-family:inherit}
    
    /* Checkboxes */
    input[type="checkbox"]{
      width:20px;
      height:20px;
      cursor:pointer;
      accent-color:var(--pri);
    }
    
    /* Buttons */
    button{
      border:none;
      border-radius:10px;
      padding:12px 18px;
      font-weight:600;
      font-size:14px;
      cursor:pointer;
      background:var(--pri);
      color:white;
      transition:all 0.2s ease;
      box-shadow:var(--shadow);
    }
    button:hover{background:var(--pri-hover);transform:translateY(-1px);box-shadow:var(--shadow-lg)}
    button:active{transform:translateY(0)}
    button:disabled{opacity:0.5;cursor:not-allowed;transform:none}
    button.secondary{background:var(--sec)}
    button.secondary:hover{background:#475569}
    button.danger{background:var(--bad)}
    button.danger:hover{background:#dc2626}
    button.good{background:var(--ok)}
    button.good:hover{background:#059669}
    button.small{padding:8px 12px;font-size:13px}
    
    /* Badges & Pills */
    .badge{
      display:inline-block;
      font-size:12px;
      padding:5px 10px;
      border:1px solid var(--line);
      border-radius:999px;
      color:var(--text-dim);
      font-weight:600;
    }
    .pill{
      padding:8px 14px;
      border-radius:999px;
      border:1px solid var(--line);
      font-size:13px;
      color:var(--text-dim);
      font-weight:600;
      background:var(--card);
    }
    
    /* Utility classes */
    .muted{color:var(--muted);font-size:13px;line-height:1.5}
    .divider{height:1px;background:var(--line);margin:16px 0}
    .warn{color:var(--warn)}
    .ok{color:var(--ok)}
    
    /* Lists */
    .list{display:flex;flex-direction:column;gap:10px}
    .item{
      border:1px solid var(--line);
      border-radius:12px;
      padding:14px;
      display:flex;
      gap:12px;
      justify-content:space-between;
      align-items:flex-start;
      background:var(--bg);
      transition:all 0.2s ease;
    }
    .item:hover{background:var(--card-hover);border-color:var(--pri)}
    .item strong{display:block;font-size:15px;margin-bottom:4px}
    .item .meta{font-size:12px;color:var(--muted);line-height:1.4}
    
    /* Tabs */
    .tabs{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:8px}
    .tab{
      background:var(--bg);
      border:1px solid var(--line);
      color:var(--text-dim);
      padding:10px 16px;
      border-radius:10px;
      font-size:14px;
      font-weight:600;
      cursor:pointer;
      transition:all 0.2s ease;
    }
    .tab:hover{background:var(--card-hover);border-color:var(--pri)}
    .tab.active{background:var(--pri);border-color:var(--pri);color:white}
    
    /* Toast notifications */
    .toast{
      position:fixed;
      bottom:20px;
      right:20px;
      background:var(--card);
      color:var(--text);
      padding:14px 18px;
      border-radius:10px;
      box-shadow:var(--shadow-lg);
      border:1px solid var(--line);
      z-index:1000;
      animation:slideIn 0.3s ease;
      max-width:90%;
      font-size:14px;
    }
    .toast.success{border-color:var(--ok);background:#064e3b}
    .toast.error{border-color:var(--bad);background:#7f1d1d}
    @keyframes slideIn{from{transform:translateX(400px);opacity:0}to{transform:translateX(0);opacity:1}}
    
    /* Mobile improvements */
    @media(max-width:767px){
      main{padding:16px 12px}
      .card{padding:16px}
      h2{font-size:16px}
      button{padding:10px 14px;font-size:13px}
      .tabs{gap:4px}
      .tab{padding:8px 12px;font-size:13px}
    }
  </style>
</head>

<body>
<header>
  <div class="top">
    <div>
      <h1>üí™ Treino PWA</h1>
      <div class="sub" id="headerSub">Deslogado</div>
    </div>
    <div class="row">
      <button id="btnInstallApp" style="background:#10b981;color:white;border:none;padding:8px 14px;font-size:12px;font-weight:bold;border-radius:6px;cursor:pointer;display:inline-block">üì• Instalar</button>
      <span class="badge" id="netBadge">offline</span>
      <button class="secondary small" id="btnLogout" style="display:none">Sair</button>
    </div>
  </div>
</header>

<main>
  <div class="grid">
    <!-- LEFT -->
    <div class="col">
      <div class="card" id="cardAuth">
        <h2>Entrar (modo DEMO local)</h2>
        <div class="muted">Sem Supabase ainda. Isso √© s√≥ para testar fluxo, offline e sess√£o.</div>
        <div style="height:10px"></div>
        <input id="inpEmail" type="email" placeholder="E-mail" autocomplete="email">
        <input id="inpPass" type="password" placeholder="Senha (qualquer coisa)" autocomplete="current-password">
        <select id="selRole">
          <option value="student">Aluno</option>
          <option value="admin">Admin</option>
        </select>
        
        <div style="display:flex;align-items:center;gap:8px;margin:8px 0">
          <input type="checkbox" id="chkRememberMe" checked>
          <label for="chkRememberMe" style="margin:0;cursor:pointer">Lembrar meus dados</label>
        </div>
        
        <div class="row" style="gap:10px">
          <button id="btnLogin" style="flex:1">Entrar</button>
          <button id="btnRegister" class="secondary" style="flex:1">Criar Conta</button>
        </div>
        <div class="muted" id="authMsg"></div>
      </div>

      <div class="card" id="cardSettings" style="display:none">
        <h2>‚öôÔ∏è Configura√ß√µes</h2>
        <label>Unidade de peso</label>
        <select id="selUnit">
          <option value="kg">Kilogramas (kg)</option>
          <option value="lb">Libras (lb)</option>
        </select>
        <button class="secondary" id="btnSaveSettings">Salvar configura√ß√µes</button>
        <div class="muted">O peso √© salvo em <b>kg</b> internamente. Na tela, converte para lb se voc√™ escolher.</div>
      </div>

      <div class="card" id="cardSessionBanner" style="display:none">
        <h2>Treino em andamento</h2>
        <div class="muted" id="sessionBannerText"></div>
        <div style="height:10px"></div>
        <div class="row">
          <button class="good" id="btnResumeSession">Retomar</button>
          <button class="danger" id="btnFinishSessionQuick">Finalizar</button>
        </div>
      </div>
    </div>

    <!-- RIGHT -->
    <div class="col">
      <div class="card" id="cardApp" style="display:none">
        <div class="tabs">
          <button class="tab active" data-tab="train">Treinar</button>
          <button class="tab" data-tab="templates">Treinos</button>
          <button class="tab" data-tab="catalog">Cat√°logo</button>
          <button class="tab" data-tab="requests">Solicita√ß√µes</button>
          <button class="tab" data-tab="history">Hist√≥rico</button>
          <button class="tab" data-tab="admin" id="tabAdmin" style="display:none">Admin</button>
        </div>

        <div class="divider"></div>

        <!-- TAB: TRAIN -->
        <section id="tab-train">
          <h2>Treinar agora</h2>
          <div class="muted">Escolha um treino e inicie. Tudo salva local. Pode fechar o app e voltar.</div>
          <div style="height:10px"></div>

          <div class="row">
            <select id="selTemplateToStart" style="flex:1"></select>
            <button id="btnStartSession">Iniciar treino</button>
          </div>

          <div class="divider"></div>

          <div id="liveSessionArea" style="display:none">
            <div class="row" style="justify-content:space-between">
              <div>
                <div class="pill" id="liveSessionTitle">Sess√£o</div>
                <div class="muted" id="liveSessionTime">00:00</div>
              </div>
              <div class="row">
                <button class="secondary" id="btnOpenRest">Descanso</button>
                <button class="danger" id="btnFinishSession">Finalizar treino</button>
              </div>
            </div>

            <div class="divider"></div>

            <div id="liveExercises" class="list"></div>
          </div>

          <div id="noLiveSession" class="muted">Nenhuma sess√£o em andamento.</div>
        </section>

        <!-- TAB: TEMPLATES -->
        <section id="tab-templates" style="display:none">
          <h2>üìã Meus Treinos</h2>
          <div class="muted">Crie treinos e adicione dias da semana com exerc√≠cios.</div>
          <div class="divider"></div>

          <div class="card" style="background:var(--bg)">
            <h3>‚ûï Novo treino</h3>
            <label>Nome do treino</label>
            <input id="tplName" placeholder="Ex: Push Pull Legs, ABC, Full Body, etc.">
            
            <label>Observa√ß√µes do treino (opcional)</label>
            <textarea id="tplNotes" placeholder="Ex: Foco em hipertrofia, 4x por semana, etc."></textarea>
            <button id="btnCreateTemplate">Criar treino</button>
          </div>

          <div class="divider"></div>
          <div id="templateList" class="list"></div>
        </section>

        <!-- TAB: CATALOG -->
        <section id="tab-catalog" style="display:none">
          <h2>Cat√°logo (exerc√≠cios ativos)</h2>
          <div class="muted">Aqui o aluno enxerga s√≥ exerc√≠cios ativos. V√≠deo ainda vazio.</div>
          <div class="divider"></div>
          <input id="catalogSearch" placeholder="Buscar exerc√≠cio...">
          <div style="height:10px"></div>
          <div id="catalogList" class="list"></div>
        </section>

        <!-- TAB: REQUESTS -->
        <section id="tab-requests" style="display:none">
          <h2>Solicitar exerc√≠cio</h2>
          <div class="muted">O aluno solicita. O admin cadastra no painel Admin.</div>
          <div class="divider"></div>

          <input id="reqName" placeholder="Nome do exerc√≠cio (ex: Remada baixa na polia)">
          <textarea id="reqDetails" placeholder="Detalhes (equipamento, varia√ß√£o, observa√ß√£o)"></textarea>
          <button id="btnSendRequest">Enviar solicita√ß√£o</button>

          <div class="divider"></div>
          <h3>Minhas solicita√ß√µes</h3>
          <div id="myRequests" class="list"></div>
        </section>

        <!-- TAB: HISTORY -->
        <section id="tab-history" style="display:none">
          <h2>Hist√≥rico</h2>
          <div class="muted">Aqui aparecem sess√µes finalizadas (local) e sets por exerc√≠cio.</div>
          <div class="divider"></div>
          <div id="historyList" class="list"></div>
        </section>

        <!-- TAB: ADMIN -->
        <section id="tab-admin" style="display:none">
          <h2>Painel Admin</h2>
          <div class="muted">Cadastrar/editar exerc√≠cios e aprovar solicita√ß√µes.</div>
          <div class="divider"></div>

          <div class="card" style="background:#0b1020">
            <h3>Novo exerc√≠cio</h3>
            <input id="exName" placeholder="Nome (ex: Supino reto com barra)">
            <input id="exPrimary" placeholder="M√∫sculo principal (ex: peito)">
            <input id="exSecondary" placeholder="Secund√°rios (v√≠rgula) (ex: tr√≠ceps, deltoide anterior)">
            <input id="exEquip" placeholder="Equipamento (ex: barra, halter, m√°quina, cabo)">
            <input id="exType" placeholder="Tipo (compound/isolation/other)">
            <textarea id="exInstr" placeholder="Instru√ß√µes (opcional)"></textarea>
            <textarea id="exNotes" placeholder="Observa√ß√µes (opcional)"></textarea>
            <input id="exYoutube" placeholder="YouTube URL (deixe vazio por enquanto)">
            <button id="btnCreateExercise" class="good">Cadastrar exerc√≠cio</button>
          </div>

          <div class="divider"></div>
          <h3>Solicita√ß√µes pendentes</h3>
          <div id="pendingRequests" class="list"></div>

          <div class="divider"></div>
          <h3>Todos os exerc√≠cios (admin)</h3>
          <input id="adminSearch" placeholder="Buscar...">
          <div style="height:10px"></div>
          <div id="adminExercises" class="list"></div>
        </section>

      </div>
    </div>
  </div>
</main>

<!-- MODAL: REGISTER -->
<div id="registerModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.8); z-index:60; backdrop-filter:blur(4px);" onclick="if(event.target.id==='registerModal') $('registerModal').style.display='none'">
  <div style="max-width:500px;margin:4vh auto;background:var(--card);border:1px solid var(--line);border-radius:16px;padding:20px;max-height:90vh;overflow-y:auto;box-shadow:var(--shadow-lg)">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px">
      <strong style="font-size:16px">Criar Conta</strong>
      <button id="btnCloseRegisterModal" style="background:#ef4444;color:white;border:none;padding:12px 20px;font-size:18px;font-weight:bold;border-radius:8px;cursor:pointer;min-width:50px">‚úï</button>
    </div>
    <div class="divider"></div>
    
    <label>Nome completo</label>
    <input id="regName" placeholder="Ex: Jo√£o Silva" autocomplete="name">
    
    <label>E-mail</label>
    <input id="regEmail" type="email" placeholder="seu@email.com" autocomplete="email">
    
    <label>Senha</label>
    <input id="regPassword" type="password" placeholder="M√≠nimo 6 caracteres" autocomplete="new-password">
    
    <label>Idade</label>
    <input id="regAge" type="number" placeholder="Ex: 25" min="10" max="120">
    
    <div class="row" style="gap:10px">
      <div style="flex:1">
        <label>Peso (kg)</label>
        <input id="regWeight" type="number" placeholder="Ex: 70" step="0.1" min="20" max="300">
      </div>
      <div style="flex:1">
        <label>Altura (cm)</label>
        <input id="regHeight" type="number" placeholder="Ex: 175" min="100" max="250">
      </div>
    </div>
    
    <label>Sexo</label>
    <select id="regGender">
      <option value="">Selecione</option>
      <option value="masculino">Masculino</option>
      <option value="feminino">Feminino</option>
      <option value="outro">Outro/Prefiro n√£o informar</option>
    </select>
    
    <label>Tipo de conta</label>
    <select id="regRole">
      <option value="student">Aluno</option>
      <option value="admin">Admin</option>
    </select>
    
    <div style="height:10px"></div>
    <button id="btnConfirmRegister" class="good">Criar Conta</button>
    <div class="muted" id="registerMsg" style="margin-top:10px"></div>
  </div>
</div>

<!-- MODAL REST -->
<div id="restModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.6); z-index:50;" onclick="if(event.target.id==='restModal') closeRestModal()">
  <div style="max-width:520px;margin:8vh auto;background:#111827;border:1px solid #374151;border-radius:16px;padding:14px">
    <div class="row" style="justify-content:space-between">
      <strong>Descanso</strong>
      <button class="secondary small" id="btnCloseRest">‚úï Fechar</button>
    </div>
    <div class="divider"></div>
    <div style="font-size:44px;font-weight:900" id="restClock">00:00</div>
    <div class="muted" id="restInfo">Baseado em timestamp (n√£o perde se fechar o app)</div>
    <div style="height:10px"></div>
    <div class="row">
      <select id="selRestSeconds" style="flex:1">
        <option value="30">30s</option>
        <option value="60">60s</option>
        <option value="90" selected>90s</option>
        <option value="120">120s</option>
        <option value="180">180s</option>
      </select>
      <button id="btnStartRest">Iniciar</button>
      <button class="secondary" id="btnStopRest">Parar</button>
    </div>
    <div style="height:10px"></div>
    <div class="muted">Se o app fechar, ao abrir ele recalcula quanto tempo passou.</div>
  </div>
</div>

<!-- MODAL: MANAGE TEMPLATE DAYS -->
<div id="templateDaysModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.8); z-index:50; backdrop-filter:blur(4px);" onclick="if(event.target.id==='templateDaysModal') closeTemplateDaysModal()">
  <div style="max-width:800px;margin:4vh auto;background:var(--card);border:1px solid var(--line);border-radius:16px;max-height:90vh;display:flex;flex-direction:column;box-shadow:var(--shadow-lg);overflow:hidden">
    <div style="padding:12px 16px;border-bottom:2px solid #374151;background:#1e293b;display:flex;align-items:center;justify-content:space-between;flex-shrink:0">
      <strong id="templateDaysModalTitle" style="font-size:16px;color:white">Dias do Treino</strong>
      <button id="btnCloseTemplateDaysModal" style="background:#ef4444;color:white;border:none;padding:12px 20px;font-size:18px;font-weight:bold;border-radius:8px;cursor:pointer;min-width:50px">‚úï</button>
    </div>
    <div style="padding:20px;overflow-y:auto;flex:1">
    
    <!-- Add Day Form -->
    <div class="card" style="background:var(--bg);margin-bottom:16px">
      <h3>‚ûï Adicionar Dia</h3>
      
      <label>Dia da semana</label>
      <select id="dayWeekday">
        <option value="">Selecione o dia</option>
        <option value="Segunda-feira">Segunda-feira</option>
        <option value="Ter√ßa-feira">Ter√ßa-feira</option>
        <option value="Quarta-feira">Quarta-feira</option>
        <option value="Quinta-feira">Quinta-feira</option>
        <option value="Sexta-feira">Sexta-feira</option>
        <option value="S√°bado">S√°bado</option>
        <option value="Domingo">Domingo</option>
      </select>
      
      <label>Grupos musculares (selecione m√∫ltiplos)</label>
      <div id="dayGroups" style="display:grid;grid-template-columns:1fr 1fr;gap:8px;padding:10px;background:var(--bg);border-radius:8px">
        <label style="display:flex;align-items:center;gap:6px;cursor:pointer;margin:0">
          <input type="checkbox" value="peito"> Peito
        </label>
        <label style="display:flex;align-items:center;gap:6px;cursor:pointer;margin:0">
          <input type="checkbox" value="costas"> Costas
        </label>
        <label style="display:flex;align-items:center;gap:6px;cursor:pointer;margin:0">
          <input type="checkbox" value="pernas"> Pernas (geral)
        </label>
        <label style="display:flex;align-items:center;gap:6px;cursor:pointer;margin:0">
          <input type="checkbox" value="quadr√≠ceps"> Quadr√≠ceps
        </label>
        <label style="display:flex;align-items:center;gap:6px;cursor:pointer;margin:0">
          <input type="checkbox" value="posteriores"> Posteriores
        </label>
        <label style="display:flex;align-items:center;gap:6px;cursor:pointer;margin:0">
          <input type="checkbox" value="gl√∫teos"> Gl√∫teos
        </label>
        <label style="display:flex;align-items:center;gap:6px;cursor:pointer;margin:0">
          <input type="checkbox" value="ombros"> Ombros
        </label>
        <label style="display:flex;align-items:center;gap:6px;cursor:pointer;margin:0">
          <input type="checkbox" value="b√≠ceps"> B√≠ceps
        </label>
        <label style="display:flex;align-items:center;gap:6px;cursor:pointer;margin:0">
          <input type="checkbox" value="tr√≠ceps"> Tr√≠ceps
        </label>
        <label style="display:flex;align-items:center;gap:6px;cursor:pointer;margin:0">
          <input type="checkbox" value="abd√¥men"> Abd√¥men
        </label>
        <label style="display:flex;align-items:center;gap:6px;cursor:pointer;margin:0">
          <input type="checkbox" value="panturrilha"> Panturrilha
        </label>
        <label style="display:flex;align-items:center;gap:6px;cursor:pointer;margin:0">
          <input type="checkbox" value="trap√©zio"> Trap√©zio
        </label>
        <label style="display:flex;align-items:center;gap:6px;cursor:pointer;margin:0">
          <input type="checkbox" value="antebra√ßo"> Antebra√ßo
        </label>
      </div>
      
      <button id="btnAddTemplateDay">Adicionar Dia</button>
    </div>
    
    <!-- Days List -->
    <h3>üìÖ Dias adicionados</h3>
    <div id="templateDaysList" class="list"></div>
    </div>
  </div>
</div>

<!-- MODAL TEMPLATE ITEMS -->
<div id="templateModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.8); z-index:50; backdrop-filter:blur(4px);" onclick="if(event.target.id==='templateModal') closeTemplateModal()">
  <div style="max-width:800px;margin:4vh auto;background:var(--card);border:1px solid var(--line);border-radius:16px;max-height:90vh;display:flex;flex-direction:column;box-shadow:var(--shadow-lg);overflow:hidden">
    <div style="padding:12px 16px;border-bottom:2px solid #374151;background:#1e293b;display:flex;align-items:center;justify-content:space-between;flex-shrink:0">
      <strong id="templateModalTitle" style="font-size:16px;color:white">Exerc√≠cios</strong>
      <button id="btnCloseTemplateModal" style="background:#ef4444;color:white;border:none;padding:12px 20px;font-size:18px;font-weight:bold;border-radius:8px;cursor:pointer;min-width:50px">‚úï</button>
    </div>
    <div style="padding:20px;overflow-y:auto;flex:1">
    
    <!-- Add Exercise Form -->
    <div class="card" style="background:var(--bg);margin-bottom:16px">
      <h3>‚ûï Adicionar exerc√≠cio</h3>
      <label>Buscar exerc√≠cio</label>
      <input id="tmplExSearch" placeholder="Digite para filtrar..." autocomplete="off">
      <div id="tmplExResults" style="max-height:300px;overflow-y:auto;margin:10px 0;border:1px solid var(--line);border-radius:10px;padding:8px"></div>
      
      <div class="divider"></div>
      
      <div class="row">
        <div style="flex:1">
          <label>Sets alvo</label>
          <input id="tmplTargetSets" type="number" placeholder="Ex: 3" value="3" min="1" max="10">
        </div>
        <div style="flex:1">
          <label>Reps alvo (simples)</label>
          <input id="tmplTargetReps" placeholder="Ex: 8-12" value="8-12">
        </div>
      </div>
      
      <label>Repeti√ß√µes personalizadas (opcional)</label>
      <div class="row" style="gap:8px;margin-bottom:8px">
        <button type="button" class="secondary small" id="btnCustomRepsHelper">üìù Assistente de s√©ries</button>
      </div>
      <textarea id="tmplCustomReps" placeholder="Ex: 10, 10, 8, 6 (uma por linha ou separado por v√≠rgula)&#10;Ou: 3x10 + 1x6" style="min-height:70px"></textarea>
      <div class="muted">Se preenchido, sobrescreve "Reps alvo". Ex: para fazer 3 s√©ries de 10 e 1 de 6, digite: 10, 10, 10, 6 ou 3x10+1x6</div>
      
      <label>Tempo de descanso deste exerc√≠cio (segundos)</label>
      <select id="tmplRestSec">
        <option value="30">30 segundos</option>
        <option value="45">45 segundos</option>
        <option value="60">60 segundos (1 min)</option>
        <option value="90" selected>90 segundos (1:30)</option>
        <option value="120">120 segundos (2 min)</option>
        <option value="180">180 segundos (3 min)</option>
        <option value="240">240 segundos (4 min)</option>
        <option value="300">300 segundos (5 min)</option>
      </select>
      
      <label>Combo (opcional)</label>
      <div class="row">
        <select id="tmplComboType" style="flex:2">
          <option value="">Sem combo</option>
          <option value="superset">Superset (A1/A2)</option>
          <option value="biset">Biset (2 exerc√≠cios mesmo m√∫sculo)</option>
          <option value="triset">Triset (3 exerc√≠cios)</option>
          <option value="giantset">Giant set (4+ exerc√≠cios)</option>
        </select>
        <input id="tmplComboGroup" placeholder="Grupo" style="width:80px" maxlength="1" value="A">
        <input id="tmplComboOrder" type="number" placeholder="Ordem" style="width:80px" min="1" value="1">
      </div>
      <div class="muted" id="comboHint" style="display:none;color:var(--ok)">üí° Modo combo ativado! Selecione m√∫ltiplos exerc√≠cios e clique em "Adicionar selecionados"</div>
      
      <button id="btnAddTemplateItem" class="good" disabled>Adicionar ao treino</button>
      <button id="btnAddMultipleItems" class="good" style="display:none" disabled>Adicionar selecionados ao combo</button>
    </div>
    
    <!-- Items List -->
    <h3>üìù Exerc√≠cios do treino</h3>
    <div id="templateItemsList" class="list"></div>
    </div>
  </div>
</div>

<!-- MODAL ASSISTENTE DE S√âRIES -->
<!-- MODAL ASSISTENTE DE S√âRIES -->
<div id="customRepsModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.8); z-index:60; backdrop-filter:blur(4px);" onclick="if(event.target.id==='customRepsModal') closeCustomRepsHelper()">
  <div style="max-width:500px;margin:10vh auto;background:var(--card);border:1px solid var(--line);border-radius:16px;padding:20px;box-shadow:var(--shadow-lg)">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px">
      <strong style="font-size:16px">S√©ries</strong>
      <button id="btnCloseCustomReps" style="background:#ef4444;color:white;border:none;padding:12px 20px;font-size:18px;font-weight:bold;border-radius:8px;cursor:pointer;min-width:50px">‚úï</button>
    </div>
    
    <div class="muted" style="margin-bottom:16px">
      Configure s√©ries com repeti√ß√µes diferentes. Ex: 3 s√©ries de 12 reps + 1 s√©rie de 6 reps (dropset)
    </div>
    
    <div id="customRepsBlocks"></div>
    
    <button class="secondary small" id="btnAddRepsBlock" style="margin-bottom:16px">+ Adicionar bloco de s√©ries</button>
    
    <div class="divider"></div>
    
    <div style="background:var(--bg);padding:12px;border-radius:8px;margin-bottom:16px">
      <div class="muted" style="margin-bottom:4px">Preview:</div>
      <strong id="customRepsPreview">-</strong>
    </div>
    
    <div class="row" style="gap:8px">
      <button class="good" id="btnApplyCustomReps">Aplicar</button>
      <button class="secondary" id="btnCancelCustomReps">Cancelar</button>
    </div>
  </div>
</div>

<!-- MODAL EDITAR EXERC√çCIO -->
<div id="editModal" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.8); z-index:60; backdrop-filter:blur(4px);" onclick="if(event.target.id==='editModal') closeEditModal()">
  <div style="max-width:700px;margin:4vh auto;background:var(--card);border:1px solid var(--line);border-radius:16px;max-height:90vh;display:flex;flex-direction:column;box-shadow:var(--shadow-lg);overflow:hidden">
    <div style="padding:12px 16px;border-bottom:2px solid #374151;background:#1e293b;display:flex;align-items:center;justify-content:space-between;flex-shrink:0">
      <strong id="editModalTitle" style="font-size:16px;color:white">Editar</strong>
      <button id="btnCloseEditModal" style="background:#ef4444;color:white;border:none;padding:12px 20px;font-size:18px;font-weight:bold;border-radius:8px;cursor:pointer;min-width:50px">‚úï</button>
    </div>
    
    <div style="padding:20px;overflow-y:auto;flex:1">
    
    <!-- Exerc√≠cios atuais no combo/grupo -->
    <div style="background:var(--bg);padding:12px;border-radius:8px;margin-bottom:16px">
      <strong style="display:block;margin-bottom:8px">Exerc√≠cios neste grupo:</strong>
      <div id="editExercisesList" class="muted"></div>
    </div>
    
    <!-- Formul√°rio de edi√ß√£o -->
    <div class="card" style="background:var(--bg)">
      <h3>‚öôÔ∏è Configura√ß√µes</h3>
      
      <div class="row">
        <div style="flex:1">
          <label>Sets alvo</label>
          <input id="editTargetSets" type="number" placeholder="Ex: 3" value="3" min="1" max="10">
        </div>
        <div style="flex:1">
          <label>Reps alvo (simples)</label>
          <input id="editTargetReps" placeholder="Ex: 8-12" value="8-12">
        </div>
      </div>
      
      <label>Repeti√ß√µes personalizadas (opcional)</label>
      <div class="row" style="gap:8px;margin-bottom:8px">
        <button type="button" class="secondary small" id="btnEditCustomRepsHelper">üìù Assistente de s√©ries</button>
      </div>
      <textarea id="editCustomReps" placeholder="Ex: 10, 10, 8, 6" style="min-height:70px"></textarea>
      
      <label>Tempo de descanso (segundos)</label>
      <select id="editRestSec">
        <option value="30">30 segundos</option>
        <option value="45">45 segundos</option>
        <option value="60">60 segundos (1 min)</option>
        <option value="90" selected>90 segundos (1:30)</option>
        <option value="120">120 segundos (2 min)</option>
        <option value="180">180 segundos (3 min)</option>
        <option value="240">240 segundos (4 min)</option>
        <option value="300">300 segundos (5 min)</option>
      </select>
      
      <label>Tipo de combo</label>
      <select id="editComboType">
        <option value="">Sem combo</option>
        <option value="superset">Superset (A1/A2)</option>
        <option value="biset">Biset (2 exerc√≠cios mesmo m√∫sculo)</option>
        <option value="triset">Triset (3 exerc√≠cios)</option>
        <option value="giantset">Giant set (4+ exerc√≠cios)</option>
      </select>
    </div>
    
    <!-- Adicionar mais exerc√≠cios ao combo -->
    <div class="card" style="background:var(--bg);margin-top:16px" id="editAddExerciseSection">
      <h3>‚ûï Adicionar mais exerc√≠cios ao combo</h3>
      <label>Buscar exerc√≠cio</label>
      <input id="editExSearch" placeholder="Digite para filtrar..." autocomplete="off">
      <div id="editExResults" style="max-height:200px;overflow-y:auto;margin:10px 0;border:1px solid var(--line);border-radius:10px;padding:8px"></div>
      <button class="secondary small" id="btnAddExerciseToCombo" disabled>+ Adicionar ao combo</button>
    </div>
    
    <div class="divider"></div>
    
    <div class="row" style="gap:8px">
      <button class="good" id="btnSaveEdit">üíæ Salvar altera√ß√µes</button>
      <button class="secondary" id="btnCancelEdit">Cancelar</button>
    </div>
    </div>
  </div>
</div>

<script type="module" src="./app.js"></script>
</body>
</html>
